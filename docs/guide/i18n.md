# i18n

Anhanga never hardcodes labels. All user-facing text is resolved through a translate function following a key convention.

## Key Conventions

| Key Pattern | Example | Used For |
|-------------|---------|----------|
| `{domain}.fields.{field}` | `person.fields.name` | Field labels |
| `{domain}.fields.{field}[{state}]` | `person.fields.name[error]` | Field label with visual state |
| `{domain}.groups.{group}` | `person.groups.basic` | Group labels |
| `common.actions.{action}` | `common.actions.create` | Action labels (shared) |

## Translate Contract

The translate function has a simple signature:

```typescript
type TranslateContract = (key: string) => string
```

Pass it to hooks:

```typescript
const form = useSchemaForm({
  schema: PersonSchema.provide(),
  scope: Scope.add,
  translate: (key) => i18n.t(key),
  // ...
})
```

## Resolution Helpers

`@anhanga/react` provides helper functions for label resolution:

```typescript
import { resolveFieldLabel, resolveGroupLabel, resolveActionLabel } from '@anhanga/react'

resolveFieldLabel(t, 'person', 'name', '')
// → t('person.fields.name')

resolveFieldLabel(t, 'person', 'name', 'error')
// → t('person.fields.name[error]')

resolveGroupLabel(t, 'person', 'basic')
// → t('person.groups.basic')

resolveActionLabel(t, 'person', 'create')
// → tries t('person.actions.create'), falls back to t('common.actions.create')
```

## Example Translation File

```json
{
  "person": {
    "fields": {
      "name": "Full Name",
      "name[error]": "Name (Error)",
      "name[new]": "Name (New)",
      "email": "Email Address",
      "phone": "Phone Number",
      "birthDate": "Date of Birth",
      "active": "Active",
      "street": "Street",
      "city": "City"
    },
    "groups": {
      "basic": "Basic Information",
      "address": "Address"
    }
  },
  "common": {
    "actions": {
      "add": "Add",
      "create": "Create",
      "update": "Update",
      "cancel": "Cancel",
      "destroy": "Delete"
    }
  },
  "validation": {
    "required": "This field is required",
    "minLength": "Minimum {min} characters",
    "maxLength": "Maximum {max} characters",
    "min": "Minimum value is {min}",
    "max": "Maximum value is {max}"
  }
}
```

## Field States

Fields can have visual states (set via the schema proxy). When a state is active, the label key includes the state:

```typescript
schema.name.state = 'error'
// Label resolves from: person.fields.name[error]
```

Define allowed states on a field:

```typescript
text().states('error', 'warning', 'new')
```
